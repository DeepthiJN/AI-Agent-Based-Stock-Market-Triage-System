stateDiagram-v2
    [*] --> Validate_Inputs

    Validate_Inputs --> Ingest_Data: Valid
    Validate_Inputs --> Reject_Request: Invalid Inputs

    Ingest_Data --> Detect_Signal: Data OK
    Ingest_Data --> Data_Error: API Failure / Missing Data

    Detect_Signal --> Evaluate_Risk: Signal Found
    Detect_Signal --> No_Trade: No Valid Signal

    Evaluate_Risk --> Generate_Proposal: Risk Within Limits
    Evaluate_Risk --> Risk_Violation: Exceeds Policy

    Generate_Proposal --> Await_User

    Await_User --> Paper_Trade: Approved
    Await_User --> Modify_Risk: Adjust Risk
    Await_User --> Cancel: User Reject
    Await_User --> Timeout: No Response

    Modify_Risk --> Evaluate_Risk

    Paper_Trade --> Log_Trade: Target Hit
    Paper_Trade --> Log_Trade: Stop Loss Hit
    Paper_Trade --> Simulation_Error: Invalid Price Path

    Log_Trade --> [*]

    Reject_Request --> [*]
    Data_Error --> [*]
    No_Trade --> [*]
    Risk_Violation --> [*]
    Cancel --> [*]
    Timeout --> [*]
    Simulation_Error --> [*]
